---
export const prerender = true;
import Layout from '../../layouts/Layout.astro';
import BlogPageLatest from '../../components/features/blog/BlogPageLatest.astro';
import HomePageHero from '../../components/pages/home/HomePageHero.astro';
import AboutPageSection from '../../components/pages/about/AboutPageSection.astro';
import HomeRealEstateSection from '../../components/pages/home/HomeRealEstateSection';
import HomeVisaAssistanceSection from '../../components/pages/home/HomeVisaAssistanceSection';
import HomePageCLKR from '../../components/pages/home/HomePageCLKR.jsx';
import CalendlyInline from '../../components/shared/CalendlyInline.astro';
import { getAllVisasFromNotion, getGuides } from '../../utils/menuData.js';
import { getCollection } from 'astro:content';

// Get all visas from Notion
const allVisas = await getAllVisasFromNotion('en');
const guides = await getGuides('en');

// Fetch all properties from the content collection
const properties = await getCollection('properties', ({ id }) => id.startsWith('en/'));
const propertiesArray = properties as any[];
---

<Layout title="Capital M Law - Home">
	<main class="">        
        <HomePageHero/>
        <AboutPageSection/>
        <HomeVisaAssistanceSection visas={allVisas} guides={guides} lang="en" />
        <HomeRealEstateSection properties={propertiesArray} features={[]} lang="en" />
        <HomePageCLKR lang="en" client:load />
    		<CalendlyInline />
		    <BlogPageLatest/>
	</main>
</Layout>
